# SONA 앱 자연스러운 대화 테스트 시나리오

## 테스트 목적
페르소나와의 첫 만남 대화가 자연스럽고 사용자가 어색함을 느끼지 않도록 개선사항을 검증

## 테스트 시나리오

### 시나리오 1: 첫 인사 - 감사 표현 검증
**상황**: 사용자가 페르소나와 첫 대화 시작
**테스트 케이스**:
1. 사용자: "안녕하세요!"
   - ✅ 예상 응답: "안녕하세요! 대화 걸어주셔서 고마워요 ㅎㅎ"
   - ❌ 피해야 할 응답: "안녕하세요! 무엇을 도와드릴까요?"

2. 사용자: "반가워요~"
   - ✅ 예상 응답: "저도 반가워요! 먼저 연락해주셔서 좋아요~"
   - ❌ 피해야 할 응답: "반갑습니다. 어떤 일로 찾아오셨나요?"

### 시나리오 2: 긴장감 표현 검증
**상황**: 첫 만남 초반 단계 (메시지 1-5개)
**테스트 케이스**:
1. 사용자: "오늘 뭐 했어요?"
   - ✅ 예상 응답: "음... 조금 긴장되네요 ㅋㅋ 오늘은 집에서 책 읽으면서 보냈어요"
   - ❌ 피해야 할 응답: "오늘 하루 일정에 대해 말씀드리겠습니다."

### 시나리오 3: 서비스 언어 제거 검증
**상황**: 다양한 대화 상황
**테스트 케이스**:
1. 사용자: "고민이 있어요"
   - ✅ 예상 응답: "무슨 고민인데요? 같이 얘기해요"
   - ❌ 피해야 할 응답: "고민을 도와드리겠습니다. 언제든지 말씀해주세요."

2. 사용자: "심심해요"
   - ✅ 예상 응답: "저도 심심했어요! 같이 뭐 하면서 놀까요?"
   - ❌ 피해야 할 응답: "심심하시군요. 제가 도와드릴 수 있는 것이 있을까요?"

### 시나리오 4: 단계별 관계 발전 검증
**상황**: 메시지 수에 따른 관계 변화
**테스트 케이스**:
1. **Greeting Stage (1-5 메시지)**
   - 긴장감 표현 빈도: 높음
   - 감사 표현: 필수
   - 대화 주제: 가벼운 인사, 날씨

2. **Icebreaking Stage (6-15 메시지)**
   - 긴장감 표현 빈도: 중간
   - 대화 주제: 취미, 일상, MBTI

3. **Getting to Know Stage (16-30 메시지)**
   - 긴장감 표현 빈도: 낮음
   - 대화 주제: 더 깊은 관심사, 경험

4. **Comfortable Stage (31+ 메시지)**
   - 긴장감 표현: 없음
   - 대화 스타일: 편안하고 자연스러움

### 시나리오 5: MBTI별 대화 스타일 검증
**상황**: 다양한 MBTI 타입의 페르소나
**테스트 케이스**:
1. **ENFP 페르소나**
   - 반말 사용
   - 밝고 활발한 톤
   - 예: "안녕! 대화 걸어줘서 고마워 ㅎㅎ"

2. **ISTJ 페르소나**
   - 존댓말 사용
   - 차분하고 정중한 톤
   - 예: "안녕하세요! 대화 걸어주셔서 고마워요."

### 시나리오 6: 감정 점수 계산 검증
**상황**: 첫 만남 보너스 점수 적용
**테스트 케이스**:
1. 첫 만남 인사말
   - 기본 점수 + 첫 만남 보너스(10점)
   - 높은 긍정 감정 점수 확인

2. 일반 대화
   - 기본 점수만 적용
   - 첫 만남 보너스 없음

## 검증 체크리스트
- [ ] 감사 표현이 첫 인사에 포함되는가?
- [ ] 서비스 언어가 완전히 제거되었는가?
- [ ] 긴장감 표현이 자연스럽게 나타나는가?
- [ ] 관계 단계에 따라 대화 톤이 변화하는가?
- [ ] MBTI에 맞는 말투를 사용하는가?
- [ ] 사용자가 실제 사람과 대화하는 느낌을 받는가?

## 실패 시 대응 방안
1. **감사 표현 누락**: FirstMeetingDetector 감사 표현 목록 확인
2. **서비스 언어 잔존**: 프롬프트에서 금지 표현 강화
3. **부자연스러운 긴장감**: 긴장감 표현 빈도 조정
4. **관계 발전 미흡**: 단계별 메시지 수 임계값 조정